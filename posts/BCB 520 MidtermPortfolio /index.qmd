---
title: "BCB 520- Midterm Portfolio Post"
subtitle: "Assessment of airline safety thus far"
author: "Ronald Bentil"
date: "2023-03-25"
categories: [Data, Visualizations]
image: "coa-aviation-safety-image.jpeg"
code-fold: true
code-tools: true
description: "Ascertaining improvement in airline business to guarantee passenger safety and satisfaction"
---

## OVERVIEW

This is a post that will be my Midterm assignment, testing my knowledge and skills acquired in/on Data visualization thus far. 

## PREAMBLE
Travel is one thing people all over the world share in common usually for family, business or pleasure; be it local or international. Among the many modes of travel, the fastest and most convenient especially for longer distances is the airplane. However, in spite of the many contingencies put in place, the plane remains a machine which is prone to faults and unforeseen circumstances regardless of the efforts put in place.

In this assignment, I will analyze data incidents and number of fatal accidents for associated with each airline for about 30 years and attempt to make  certain conclusions.

Criteria for choice of parameters used in assessment:

The data set had several airlines so airlines with on average one incident per year or more in the period 1985-1999 and 2000-2014 were selected for analysis. 

## DATA
The data set I will be using for my visualizations is an already existent data set package in R. 
Source:
[Aviation Safety Network](https://r-data.pmagunia.com/dataset/airline-safety).


A data dictionary has  been added to provide definitions for the various headers in the data set. 

```{r}
airlinesafety=read.csv('Airline safety datset.csv', header = TRUE)

library(knitr)
kable(airlinesafety)


```

Below is the data dictionary that defines attributes in the data:

```{r}
library(tidyverse)
library(readxl)
library(dplyr)

airlinesafety_attributes <- read_xlsx("airlinesafetydatadictionary.xlsx")
knitr::kable(airlinesafety_attributes)

```
## VISUALIZATIONS

Further, I went on to generate averages and standard deviations of the number of fatal accidents for the same periods (1985-1999 and 2000-2014)
```{r}
library(knitr)

SumFatal_accidents = apply(airlinesafety[c("fatal_accidents_00_14", "fatal_accidents_85_99")], MARGIN = 2, FUN = function(x) {
  c(Average = mean(x), SD = sd(x), quantile(x, probs = c(.25, .5, .75, 1)), 100*mean(x > 1))
})
rownames(SumFatal_accidents) = c("Average", "Standard deviation", "Q1 (<25%)", "Median", "Q3 (<75%)", "Max",
                                 "% of airlines with more than fatal accident in 15 years")

kable(SumFatal_accidents, align = "c", caption = "Summary of Fatal Accidents")
```

```{r}
library(ggplot2)
library(dplyr)
library(reshape2)



airlinesafety <- read.csv("Airline safety datset.csv")


airlines_fatal <- airlinesafety %>%
  filter(fatal_accidents_85_99 + fatal_accidents_00_14 > 1)


fatal_data <- data.frame(Airline = airlines_fatal$airline,
                         Fatal_85_99 = airlines_fatal$fatal_accidents_85_99,
                         Fatal_00_14 = airlines_fatal$fatal_accidents_00_14)


fatal_data_melt <- melt(fatal_data, id.vars = "Airline")


ggplot(fatal_data_melt, aes(x = Airline, y = value, fill = variable)) +
  geom_bar(stat = "identity", position = "stack") +
  labs(title = "Airlines with more than one Fatal Accidents",
       x = "Airline",
       y = "Number of Fatal Accidents") +
  scale_fill_manual(name = "Time Period",
                    values = c("#F8766D", "#00BA38"),
                    labels = c("1985-1999", "2000-2014")) +
  theme(axis.text.x = element_text(angle = 70, hjust = 1))


```




```{r}
library(ggplot2)


departures <- airlinesafety %>%
  group_by(airline) %>%
  summarise(total_departures = sum(avail_seat_km_per_week))


fatal_data <- airlinesafety %>%
  filter(fatal_accidents_85_99 + fatal_accidents_00_14 > 1) %>%
  mutate(total_fatalities = fatal_accidents_85_99 + fatal_accidents_00_14) %>%
  select(airline, total_fatalities) %>%
  inner_join(departures, by = "airline")

ggplot(fatal_data, aes(x = total_departures, y = total_fatalities)) +
  geom_point() +
  labs(title = "Fatal Accidents vs. Departures",
       x = "Total Departures",
       y = "Total Fatal Accidents")


```

```{r}

correlation <- cor.test(fatal_data$total_departures, fatal_data$total_fatalities)


cat("Correlation Coefficient:", correlation$estimate, "\n")
cat("p-value:", correlation$p.value, "\n")

library(dplyr)


correlation <- cor.test(fatal_data$total_departures, fatal_data$total_fatalities)


results_df <- data.frame(
  "Variable 1" = "Total Departures",
  "Variable 2" = "Total Fatalities",
  "Correlation Coefficient" = correlation$estimate,
  "p-value" = correlation$p.value
)


results_df %>%
  kable()

```

## CONCLUSIONS
I cant exactly infer from the descriptive statistics which airline is the safest for travel. However, from the visualizations, it is clear that there has been and continues to be significant reduction in the number of incidences and fatal accidents. A great indication that there is robust improvement in the services and technology over the years and airlines are doing their utmost best to allay passenger fears, and get them to their destinations safely. The choice though, would totally be a matter of preference! 



